{"version":3,"sources":["components/ChangeValue/ChahgeValue.tsx","hooks/useTypedSelector.tsx","hooks/withDiscount.tsx","hooks/useChangeValue.tsx","components/ProductCard/ProductCard.module.css","components/ProductCard/ProductCardModal/ProductCardModal.tsx","components/ProductCard/ProductCard.tsx","pages/ProductContent.tsx"],"names":["ChahgeValue","props","countValue","upValue","downValue","className","onClick","type","shape","icon","UseTypedSelector","useSelector","withDiscount","order","discount","DiscountName","ON_3_KG","priceWithDiscount","Number","price","valueRule","useChangeValue","productName","useState","countValueInHook","setCountValue","totalPrice","totalPriceInHook","setTotalPrice","changeValueOrder","useActionCreators","useEffect","Value","newPrice","console","log","module","exports","ProductCardModal","product","img","localStorageOrders","pushProduct","title","visible","isModalVisible","onOk","setIsModalVisible","inBasket","okText","cancelText","onCancel","src","alt","style","fontWeight","color","ProductCard","btn","setBtn","orders","localStorage","getItem","json","JSON","parse","length","map","j","showModal","item","hoverable","width","display","flexDirection","alignItems","flex","cover","CardImg","description","textAlign","marginBottom","disabled","danger","ProductContent","getProductsThunk","products","state","paddingTop"],"mappings":"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","file":"static/js/6.6263a835.chunk.js","sourcesContent":["\r\nimport React, { FC } from 'react'\r\nimport { PlusOutlined, MinusOutlined } from '@ant-design/icons';\r\nimport { Button } from 'antd';\r\n\r\ninterface IChangeValue{\r\n    upValue:()=> void,\r\n    downValue:()=> void,\r\n    countValue: number\r\n}\r\n\r\nconst ChahgeValue:FC<IChangeValue> = (props) => {\r\n\r\n\r\n    const {countValue,upValue, downValue} = props\r\n\r\n\r\n    return (\r\n        <div className= 'ModalContent__PriceInfo__ChangeValue___item'>\r\n                        <div className=\"ModalContent__PriceInfo__item\">\r\n                            <Button onClick={() => upValue()} type=\"primary\" shape=\"circle\" icon={<PlusOutlined />} />\r\n                        </div>\r\n                        <div className=\"ModalContent__PriceInfo__item\">\r\n                            <span>{countValue}</span>\r\n                        </div>\r\n                        <div className=\"ModalContent__PriceInfo__item\">\r\n                            <Button onClick={() => downValue()} type=\"primary\" shape=\"circle\" icon={<MinusOutlined />} />\r\n                        </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChahgeValue\r\n","import { TypedUseSelectorHook, useSelector } from \"react-redux\";\r\nimport { RootState } from \"../redux/store\"\r\n\r\nexport const UseTypedSelector: TypedUseSelectorHook<RootState> = useSelector","import { DiscountName } from \"../types/discounts\";\r\n\r\n\r\n\r\nexport interface IOrderIsDiscount{\r\n    countValueInHook: number,\r\n    discount: string | '',\r\n    price: number\r\n}\r\n\r\n\r\n\r\nexport function withDiscount (order:IOrderIsDiscount){\r\n        switch (order.discount) {\r\n            case DiscountName.ON_3_KG:\r\n                    return {priceWithDiscount: Number(order.price) /2,\r\n                    valueRule: 3}\r\n\r\n            default:\r\n               return {priceWithDiscount: Number(order.price),\r\n                valueRule: null}\r\n        }\r\n}","import { useEffect, useState } from \"react\";\r\nimport { useActionCreators } from \"./useAC\";\r\nimport { withDiscount } from \"./withDiscount\";\r\n\r\n\r\n\r\nexport interface IOrderIsDiscount {\r\n    countValue?: number,\r\n    totalPrice?: number,\r\n    discount: string | '' | undefined,\r\n    price: number,\r\n    productName: string;\r\n    img?: string;\r\n    inBasket?: boolean\r\n}\r\n\r\n\r\n\r\nexport function useChangeValue(order:any) {\r\n    const {price, discount , productName , countValue} = order\r\n    const [countValueInHook, setCountValue] = useState<number>(countValue || 1)\r\n    const [totalPriceInHook, setTotalPrice] = useState<number>(order.totalPrice || order.price)\r\n    const {changeValueOrder} = useActionCreators()\r\n\r\n    useEffect(() => {\r\n        changeValueOrder(productName, totalPriceInHook, countValueInHook)\r\n    }, [countValueInHook])\r\n\r\n    const upValue = () => {\r\n        setCountValue((Value) => Value + 1)\r\n        const newPrice = withDiscount({ countValueInHook, discount, price })\r\n        console.log('totalPriceInHook '+totalPriceInHook)\r\n\r\n        console.log('price '+price)\r\n        console.log('newPrice.priceWithDiscount '+newPrice.priceWithDiscount)\r\n\r\n\r\n        if (!!discount) {\r\n\r\n\r\n            if (Number(countValueInHook + 1) % Number(newPrice.valueRule) === 0) {\r\n                setTotalPrice((totalPriceInHook) => totalPriceInHook = Number(totalPriceInHook) + Number(newPrice.priceWithDiscount))\r\n\r\n            } else {\r\n                setTotalPrice((totalPriceInHook) => totalPriceInHook = Number(totalPriceInHook) + Number(price))\r\n\r\n            }\r\n\r\n        } else {\r\n            setTotalPrice((totalPriceInHook) => totalPriceInHook = Number(totalPriceInHook) + Number(price))\r\n\r\n        }\r\n    }\r\n    const downValue = () => {\r\n        if (countValueInHook - 1 === 0) {\r\n            return\r\n        }\r\n        if (!!discount) {\r\n            const newPrice = withDiscount({ countValueInHook, discount, price })\r\n            if (Number(countValueInHook) % Number(newPrice.valueRule) === 0) {\r\n                setTotalPrice((totalPriceInHook) => totalPriceInHook = Number(totalPriceInHook) - Number(newPrice.priceWithDiscount))\r\n\r\n            } else {\r\n                setTotalPrice((totalPriceInHook) => totalPriceInHook = Number(totalPriceInHook) - Number(price))\r\n            }\r\n        } else {\r\n            setTotalPrice((totalPriceInHook) => totalPriceInHook = Number(totalPriceInHook) - Number(price))\r\n        }\r\n        setCountValue((Value) => Value - 1)\r\n    }\r\n\r\n    return {\r\n        countValueInHook, setCountValue, totalPriceInHook, setTotalPrice, upValue, downValue\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"CardImg\":\"ProductCard_CardImg__Q7044\"};","import { Modal } from 'antd';\r\nimport React, { FC, useState } from 'react'\r\nimport { IProduct } from '../../../types/product';\r\nimport { useActionCreators } from '../../../hooks/useAC';\r\nimport ChahgeValue from '../../ChangeValue/ChahgeValue';\r\nimport { useChangeValue } from '../../../hooks/useChangeValue';\r\n\r\n\r\ninterface IModal {\r\n    isModalVisible: boolean;\r\n    setIsModalVisible: React.Dispatch<React.SetStateAction<boolean>>;\r\n    product: IProduct;\r\n}\r\n\r\nconst ProductCardModal: FC<IModal> = (props) => {\r\n    const { img, price, productName, discount } = props.product\r\n    const { localStorageOrders, pushProduct } = useActionCreators()\r\n\r\n    const {countValueInHook, setCountValue, totalPriceInHook, setTotalPrice, upValue, downValue\r\n    } = useChangeValue({productName, discount, price} )\r\n\r\n    const handleOk = () => {\r\n        if (countValueInHook === 0) return; //warn\r\n        props.setIsModalVisible(false);\r\n        localStorageOrders({ img, productName, countValue:countValueInHook, totalPrice: totalPriceInHook, price, inBasket: true, discount});\r\n        pushProduct({ productName, img, price, totalPrice: totalPriceInHook, inBasket: true, discount })\r\n\r\n    };\r\n\r\n    const handleCancel = () => {\r\n        props.setIsModalVisible(false);\r\n        setCountValue(1)\r\n        setTotalPrice(price)\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Modal title=\"Заказ\" visible={props.isModalVisible} onOk={() => handleOk()} okText='Добавить в корзину' cancelText='Отмена' onCancel={handleCancel}>\r\n                <div className='ModalContent'>\r\n                    <div className=\"ModalContent__info\">\r\n                        <div>\r\n                            <img src={img} alt=\"\" />\r\n                        </div>\r\n                        <div>\r\n                            <span>{productName}</span>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"ModalContent__PriceInfo\">\r\n                        <ChahgeValue countValue={countValueInHook} upValue ={upValue} downValue={downValue} />\r\n\r\n                        <div className=\"ModalContent__PriceInfo__item\">\r\n                            <h1 style={{ fontWeight: 'normal' }}>Сумма</h1>\r\n                            <h2 style={{ fontWeight: 'bold', color: 'chocolate' }}>${totalPriceInHook}</h2>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </Modal>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default ProductCardModal\r\n","import { Button, Card, Col, Row } from \"antd\";\r\nimport Meta from \"antd/lib/card/Meta\";\r\nimport style from \"./ProductCard.module.css\";\r\nimport React, { FC, useEffect, useState } from \"react\";\r\nimport { IProduct } from \"../../types/product\";\r\nimport ProductCardModal from \"./ProductCardModal/ProductCardModal\";\r\nimport { IOrder } from \"../../types/order\";\r\n\r\nconst ProductCard: FC<IProduct> = (props) => {\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [btn, setBtn] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const orders = localStorage.getItem(\"orders\") || \"[]\";\r\n    const json = JSON.parse(orders) as IProduct[];\r\n    if (json.length > 0) {\r\n      json.map((j) => {\r\n        if (j.productName === props.productName) {\r\n          setBtn(true);\r\n        }\r\n      });\r\n    }\r\n  });\r\n  const showModal = () => {\r\n    setIsModalVisible(true);\r\n  };\r\n  return (\r\n    <div className={style.item}>\r\n      <Card\r\n        hoverable\r\n        style={{\r\n          width: \"300px\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          alignItems: \"center\",\r\n          flex: \"0 1 33.333%\",\r\n        }}\r\n        cover={\r\n          <div className={style.CardImg}>\r\n            <img alt=\"imgProduct\" src={props.img} />\r\n          </div>\r\n        }\r\n      >\r\n        <Meta\r\n          title={props.productName}\r\n          description={\"$\" + props.price}\r\n          style={{ textAlign: \"center\", marginBottom: \"15px\" }}\r\n        />\r\n        {btn === true ? (\r\n          <Button disabled={true} type=\"dashed\" onClick={() => showModal()}>\r\n            {\" \"}\r\n            В корзине{\" \"}\r\n          </Button>\r\n        ) : (\r\n          <Button\r\n            disabled={false}\r\n            type=\"dashed\"\r\n            danger\r\n            onClick={() => showModal()}\r\n          >\r\n            {\" \"}\r\n            Купить{\" \"}\r\n          </Button>\r\n        )}\r\n      </Card>\r\n\r\n      <ProductCardModal\r\n        product={props}\r\n        isModalVisible={isModalVisible}\r\n        setIsModalVisible={setIsModalVisible}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n","import React from \"react\";\r\nimport { FC, useEffect } from \"react\";\r\nimport ProductCard from \"../components/ProductCard/ProductCard\";\r\nimport { useActionCreators } from \"../hooks/useAC\";\r\nimport { UseTypedSelector } from \"../hooks/useTypedSelector\";\r\n\r\nconst ProductContent: FC = () => {\r\n  const { getProductsThunk } = useActionCreators();\r\n  const { products } = UseTypedSelector((state) => state.ProductContent);\r\n\r\n  useEffect(() => {\r\n    getProductsThunk();\r\n  }, []);\r\n  console.log(products);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"ProductContent_items\" style={{ paddingTop: \"20px\" }}>\r\n        {products.map((product) => (\r\n          <ProductCard key={product.productName} {...product} />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductContent;\r\n"],"sourceRoot":""}