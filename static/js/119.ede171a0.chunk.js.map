{"version":3,"sources":["pages/ModalPages/pages/Rain/index.tsx","pages/ModalPages/pages/Rain/style.module.scss"],"names":["Rain","isOpen","intl","useGetLocale","close","useModalLocation","useCoins","coinsList","selectedCoin","useState","coin","coinName","setCoinName","coinsOptions","useMemo","map","c","value","label","balance","icon","image","inputValue","setInputValue","onEnterClick","event","code","send","useEffect","window","addEventListener","removeEventListener","preventDefault","chatSocket","type","rain_amount","toFixed","actualCoin","coinsManager","walletCoinsState","coinValueUpdate","Number","onClose","paper","className","css","titleWrapper","formatMessage","id","variant","fontSize","closeIcon","onClick","box","wrapper","inputs","inputWrapper","onSubmit","classes","root","input","onChange","target","onBlur","startAdornment","position","inputIcon","endAdornment","select","showLabel","labelClass","selectLabel","iconClass","selectIcon","itemClass","selectItem","options","rootSelect","expandIcon","selectExpandIcon","optionsContainer","selectOptionsContainer","button","transparent","module","exports"],"mappings":"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","file":"static/js/119.ede171a0.chunk.js","sourcesContent":["import React, {\r\n  ChangeEvent,\r\n  FocusEvent,\r\n  FormEvent,\r\n  FunctionComponent,\r\n  MouseEvent,\r\n  useMemo,\r\n  useState,\r\n  useEffect,\r\n} from \"react\";\r\nimport { useGetLocale } from \"providers\";\r\n\r\nimport {\r\n  Button,\r\n  Input,\r\n  GetCoinImg,\r\n  Icon,\r\n  InputAdornment,\r\n  Select,\r\n  ItemProps,\r\n} from \"components\";\r\nimport { chatSocket } from \"utils\";\r\nimport { coinsManager, useCoins, useModalLocation } from \"hooks\";\r\n\r\nimport { ModalsProps } from \"config/routes\";\r\nimport { Dialog } from \"containers/PopUps\";\r\n\r\nimport css from \"./style.module.scss\";\r\n\r\nconst Rain: FunctionComponent<ModalsProps> = ({ isOpen }) => {\r\n  const intl = useGetLocale();\r\n  const { close } = useModalLocation();\r\n\r\n  const { coinsList, selectedCoin } = useCoins([\"coinsList\", \"selectedCoin\"]);\r\n\r\n  const [coinName, setCoinName] = useState<string>(selectedCoin?.coin || \"BTC\");\r\n\r\n  const coinsOptions = useMemo<ItemProps[]>(() => {\r\n    return coinsList.map<ItemProps>((c) => {\r\n      if (selectedCoin?.coin === c.coin) {\r\n        return {\r\n          value: c.coin,\r\n          label: selectedCoin.balance,\r\n          icon: c.image,\r\n        };\r\n      }\r\n\r\n      return {\r\n        value: c.coin,\r\n        label: c.balance,\r\n        icon: c.image,\r\n      };\r\n    });\r\n  }, [coinsList, selectedCoin]);\r\n\r\n  const handleCoinChange = (value: string | number) => {\r\n    if (typeof value !== \"string\") {\r\n      return;\r\n    }\r\n\r\n    setCoinName(value);\r\n  };\r\n\r\n  const [inputValue, setInputValue] = useState(\"0.00000050\");\r\n  const handleInputChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\r\n    const { value } = target;\r\n    if (Number(value) || Number(value) === 0) {\r\n      setInputValue(target.value);\r\n    }\r\n  };\r\n  const handleInputBlur = ({ target }: FocusEvent<HTMLInputElement>) => {\r\n    const { value } = target;\r\n    setInputValue(Number(value).toFixed(8));\r\n  };\r\n\r\n  const onEnterClick = (event: KeyboardEvent) => {\r\n    if (event.code === \"Enter\") {\r\n      send(event);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      window.addEventListener(\"keydown\", onEnterClick);\r\n    } else {\r\n      window.removeEventListener(\"keydown\", onEnterClick);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", onEnterClick);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const send = (\r\n    event:\r\n      | FormEvent<HTMLFormElement>\r\n      | MouseEvent<HTMLButtonElement>\r\n      | KeyboardEvent,\r\n  ) => {\r\n    event.preventDefault();\r\n    chatSocket.send({\r\n      type: \"rain\",\r\n      rain_amount: inputValue,\r\n      coin: coinName,\r\n    });\r\n\r\n    setInputValue((0).toFixed(8));\r\n    debugger;\r\n\r\n    const { walletCoinsState } = coinsManager;\r\n    const actualCoin = walletCoinsState[coinName];\r\n\r\n    if (actualCoin) {\r\n      coinsManager.coinValueUpdate(\r\n        `${Number(actualCoin.balance) - Number(inputValue)}`,\r\n        coinName,\r\n      );\r\n    }\r\n\r\n    close();\r\n  };\r\n  const onClose = () => {\r\n    close();\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      isOpen={isOpen}\r\n      paper={{\r\n        className: css.paper,\r\n      }}\r\n      onClose={onClose}>\r\n      <div className={css.titleWrapper}>\r\n        <span>{intl.formatMessage({ id: \"rain.title\" })}</span>\r\n        <Icon\r\n          variant=\"close\"\r\n          fontSize={12}\r\n          className={css.closeIcon}\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n\r\n      <div className={css.box}>\r\n        <div className={css.wrapper}>\r\n          <div className={css.inputs}>\r\n            <div className={css.inputWrapper}>\r\n              <form onSubmit={send}>\r\n                <Input\r\n                  classes={{ root: css.input }}\r\n                  value={inputValue}\r\n                  onChange={handleInputChange}\r\n                  onBlur={handleInputBlur}\r\n                  startAdornment={\r\n                    <InputAdornment position=\"start\">\r\n                      <GetCoinImg coin={coinName} className={css.inputIcon} />\r\n                    </InputAdornment>\r\n                  }\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <Select\r\n                        className={css.select}\r\n                        showLabel={false}\r\n                        labelClass={css.selectLabel}\r\n                        iconClass={css.selectIcon}\r\n                        itemClass={css.selectItem}\r\n                        value={coinName}\r\n                        options={coinsOptions}\r\n                        onChange={handleCoinChange}\r\n                        classes={{\r\n                          root: css.rootSelect,\r\n                          expandIcon: css.selectExpandIcon,\r\n                          optionsContainer: css.selectOptionsContainer,\r\n                        }}\r\n                      />\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={css.wrapper}>\r\n          <Button className={css.button} transparent onClick={send}>\r\n            {intl.formatMessage({ id: \"rain.send\" })}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default Rain;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainWrapperPadding\":\"10px\",\"desktopHeaderSize\":\"64px\",\"bottomButtonsSize\":\"60px\",\"desktopChatWidth\":\"310px\",\"swipedChatWidth\":\"960px\",\"arrBlockWidth\":\"12px\",\"headerHeight\":\"60px\",\"inputPadding\":\"16px\",\"chatPadding\":\"16px\",\"inputHeight\":\"56px\",\"chatWidth\":\"280px\",\"spacing\":\"8px\",\"mobileScreen\":\"600px\",\"feyorraDisableSize\":\"1080px\",\"paper\":\"style_paper__23mTl\",\"box\":\"style_box__YjWEq\",\"titleWrapper\":\"style_titleWrapper__1ThCl\",\"closeIcon\":\"style_closeIcon__3xhMi\",\"block\":\"style_block__Pv4OJ\",\"wrapper\":\"style_wrapper__1VLW-\",\"inputWrapper\":\"style_inputWrapper__3_eQU\",\"input\":\"style_input__2gcfv\",\"select\":\"style_select__10gbS\",\"selectLabel\":\"style_selectLabel__2inT2\",\"selectIcon\":\"style_selectIcon__3SRXK\",\"selectItem\":\"style_selectItem__20diD\",\"selectOptionsContainer\":\"style_selectOptionsContainer__WYPOZ\",\"selectExpandIcon\":\"style_selectExpandIcon__EV8aV\",\"rootSelect\":\"style_rootSelect__3vf_b\",\"button\":\"style_button__1bjFB\",\"inputs\":\"style_inputs__21r2p\",\"inputIcon\":\"style_inputIcon__ovfSK\"};"],"sourceRoot":""}