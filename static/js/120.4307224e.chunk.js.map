{"version":3,"sources":["pages/ModalPages/pages/Tip/index.tsx","pages/ModalPages/pages/Tip/style.module.scss"],"names":["Tip","isOpen","intl","useGetLocale","close","useModalLocation","useState","inputValue","setInputValue","isFetching","setIsFetching","useCoins","coinsList","selectedCoin","coin","coinName","setCoinName","userName","setUserName","useFetch","fetchTip","coinsOptions","useMemo","map","c","value","label","balance","icon","image","onEnterClick","event","code","send","useEffect","window","addEventListener","removeEventListener","a","preventDefault","payload","amount","user_name","variables","data","error","notifyBarManager","timeOut","message","coinsManager","coinValueUpdate","success","formatMessage","id","onClose","paper","className","css","titleWrapper","variant","fontSize","closeIcon","onClick","box","wrapper","onChange","target","inputs","inputWrapper","onSubmit","classes","root","input","Number","onBlur","toFixed","startAdornment","position","inputIcon","endAdornment","select","showLabel","labelClass","selectLabel","iconClass","selectIcon","itemClass","selectItem","options","rootSelect","expandIcon","selectExpandIcon","optionsContainer","selectOptionsContainer","buttonWrapper","button","transparent","disabled","module","exports"],"mappings":"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","file":"static/js/120.4307224e.chunk.js","sourcesContent":["import React, {\r\n  useState,\r\n  FocusEvent,\r\n  ChangeEvent,\r\n  useMemo,\r\n  FormEvent,\r\n  MouseEvent,\r\n  FunctionComponent,\r\n  useEffect,\r\n} from \"react\";\r\nimport { Dialog } from \"containers/PopUps\";\r\nimport { useGetLocale } from \"providers\";\r\n\r\nimport {\r\n  Button,\r\n  Input,\r\n  GetCoinImg,\r\n  Icon,\r\n  InputAdornment,\r\n  Select,\r\n  ItemProps,\r\n  notifyBarManager,\r\n} from \"components\";\r\nimport css from \"./style.module.scss\";\r\nimport { useCoins, useFetch, coinsManager, useModalLocation } from \"hooks\";\r\nimport { Input as ProgressiveInput } from \"../../componentsProgressive\";\r\nimport { ModalsProps } from \"config/routes\";\r\n\r\ninterface TipFetchResponse {\r\n  message: string;\r\n  amount: string;\r\n  coin: string;\r\n  balance: string;\r\n  success: boolean;\r\n}\r\n\r\nconst Tip: FunctionComponent<ModalsProps> = ({ isOpen }) => {\r\n  const intl = useGetLocale();\r\n  const { close } = useModalLocation();\r\n\r\n  const [inputValue, setInputValue] = useState(\"0.00000050\");\r\n  const [isFetching, setIsFetching] = useState<boolean>(false);\r\n  const { coinsList, selectedCoin } = useCoins([\"coinsList\", \"selectedCoin\"]);\r\n\r\n  const [coinName, setCoinName] = useState<string>(selectedCoin?.coin || \"BTC\");\r\n  const [userName, setUserName] = useState<string>(\"\");\r\n  const [fetchTip] = useFetch<TipFetchResponse>(\"transfer/send-transfer\");\r\n\r\n  const coinsOptions = useMemo<ItemProps[]>(() => {\r\n    return coinsList.map<ItemProps>((c) => {\r\n      if (selectedCoin?.coin === c.coin) {\r\n        return {\r\n          value: c.coin,\r\n          label: selectedCoin.balance,\r\n          icon: c.image,\r\n        };\r\n      }\r\n\r\n      return {\r\n        value: c.coin,\r\n        label: c.balance,\r\n        icon: c.image,\r\n      };\r\n    });\r\n  }, [coinsList, selectedCoin]);\r\n\r\n  const handleInputChange = ({ target }: ChangeEvent<HTMLInputElement>) => {\r\n    const { value } = target;\r\n    if (Number(value) || Number(value) === 0) {\r\n      setInputValue(target.value);\r\n    }\r\n  };\r\n\r\n  const handleInputBlur = ({ target }: FocusEvent<HTMLInputElement>) => {\r\n    const { value } = target;\r\n    setInputValue(Number(value).toFixed(8));\r\n  };\r\n\r\n  const handleCoinChange = (value: string | number) => {\r\n    if (typeof value !== \"string\") {\r\n      return;\r\n    }\r\n\r\n    setCoinName(value);\r\n  };\r\n\r\n  const onEnterClick = (event: KeyboardEvent) => {\r\n    if (event.code === \"Enter\") {\r\n      send(event);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      window.addEventListener(\"keydown\", onEnterClick);\r\n    } else {\r\n      window.removeEventListener(\"keydown\", onEnterClick);\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener(\"keydown\", onEnterClick);\r\n    };\r\n  }, [isOpen]);\r\n\r\n  const handleUserNameChanged = ({ target }: ChangeEvent<HTMLInputElement>) => {\r\n    setUserName(target.value);\r\n  };\r\n\r\n  const send = async (\r\n    event:\r\n      | FormEvent<HTMLFormElement>\r\n      | MouseEvent<HTMLButtonElement>\r\n      | KeyboardEvent,\r\n  ) => {\r\n    event.preventDefault();\r\n    if (isFetching) {\r\n      return;\r\n    }\r\n    setIsFetching(true);\r\n    const payload = {\r\n      coin: coinName,\r\n      amount: inputValue,\r\n      user_name: userName,\r\n    };\r\n\r\n    const { data, error } = await fetchTip({\r\n      variables: payload,\r\n    });\r\n    if (error) {\r\n      notifyBarManager.error({\r\n        timeOut: 4000,\r\n        message: error,\r\n      });\r\n      setIsFetching(false);\r\n      return;\r\n    }\r\n    coinsManager.coinValueUpdate(data!.balance, data!.coin);\r\n    notifyBarManager.success({\r\n      timeOut: 4000,\r\n      message: intl.formatMessage({ id: \"tip.success\" }),\r\n    });\r\n    setIsFetching(false);\r\n    onClose();\r\n  };\r\n\r\n  const onClose = () => {\r\n    close();\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      isOpen={isOpen}\r\n      paper={{\r\n        className: css.paper,\r\n      }}\r\n      onClose={onClose}>\r\n      <div className={css.titleWrapper}>\r\n        <span>{intl.formatMessage({ id: \"tip.tip\" })}</span>\r\n        <Icon\r\n          variant=\"close\"\r\n          fontSize={12}\r\n          className={css.closeIcon}\r\n          onClick={onClose}\r\n        />\r\n      </div>\r\n\r\n      <div className={css.box}>\r\n        <div className={css.wrapper}>\r\n          <ProgressiveInput\r\n            label={intl.formatMessage({ id: \"username\" })}\r\n            value={userName}\r\n            onChange={handleUserNameChanged}\r\n          />\r\n          <div className={css.inputs}>\r\n            <div className={css.inputWrapper}>\r\n              <form onSubmit={send}>\r\n                <Input\r\n                  classes={{ root: css.input }}\r\n                  value={inputValue}\r\n                  onChange={handleInputChange}\r\n                  onBlur={handleInputBlur}\r\n                  startAdornment={\r\n                    <InputAdornment position=\"start\">\r\n                      <GetCoinImg coin={coinName} className={css.inputIcon} />\r\n                    </InputAdornment>\r\n                  }\r\n                  endAdornment={\r\n                    <InputAdornment position=\"end\">\r\n                      <Select\r\n                        className={css.select}\r\n                        showLabel={false}\r\n                        labelClass={css.selectLabel}\r\n                        iconClass={css.selectIcon}\r\n                        itemClass={css.selectItem}\r\n                        value={coinName}\r\n                        options={coinsOptions}\r\n                        onChange={handleCoinChange}\r\n                        classes={{\r\n                          root: css.rootSelect,\r\n                          expandIcon: css.selectExpandIcon,\r\n                          optionsContainer: css.selectOptionsContainer,\r\n                        }}\r\n                      />\r\n                    </InputAdornment>\r\n                  }\r\n                />\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={css.buttonWrapper}>\r\n          <Button\r\n            className={css.button}\r\n            transparent\r\n            onClick={send}\r\n            disabled={isFetching}>\r\n            {intl.formatMessage({ id: \"tip.sendTip\" })}\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default Tip;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainWrapperPadding\":\"10px\",\"desktopHeaderSize\":\"64px\",\"bottomButtonsSize\":\"60px\",\"desktopChatWidth\":\"310px\",\"swipedChatWidth\":\"960px\",\"arrBlockWidth\":\"12px\",\"headerHeight\":\"60px\",\"inputPadding\":\"16px\",\"chatPadding\":\"16px\",\"inputHeight\":\"56px\",\"chatWidth\":\"280px\",\"spacing\":\"8px\",\"mobileScreen\":\"600px\",\"feyorraDisableSize\":\"1080px\",\"paper\":\"style_paper__y51JU\",\"box\":\"style_box__FgBKo\",\"titleWrapper\":\"style_titleWrapper__3dvp4\",\"closeIcon\":\"style_closeIcon__2G44X\",\"block\":\"style_block__2ZQxx\",\"wrapper\":\"style_wrapper__1znW1\",\"inputWrapper\":\"style_inputWrapper__1NLR_\",\"input\":\"style_input__eM6nA\",\"select\":\"style_select__2Z_JB\",\"selectLabel\":\"style_selectLabel__302Ri\",\"selectIcon\":\"style_selectIcon__EPZ4u\",\"selectItem\":\"style_selectItem__3OOCQ\",\"selectOptionsContainer\":\"style_selectOptionsContainer__cD0VA\",\"selectExpandIcon\":\"style_selectExpandIcon__3ScOI\",\"rootSelect\":\"style_rootSelect__2UbK7\",\"button\":\"style_button__11-vw\",\"inputs\":\"style_inputs__1-ff3\",\"inputIcon\":\"style_inputIcon__12-0z\",\"buttonWrapper\":\"style_buttonWrapper__3582R\"};"],"sourceRoot":""}